(self.webpackChunk_minimal_minimal_kit_react=self.webpackChunk_minimal_minimal_kit_react||[]).push([[7359],{78236:function(e,n,t){"use strict";t.r(n);var r=t(74165),i=t(93433),c=t(15861),a=t(4942),s=t(29439),o=t(1413),l=t(72791),d=t(36314),u=t(20890),h=t(39157),x=t(90493),j=t(49900),p=t(46112),Z=t(13400),m=t(94721),f=t(48550),v=t(61889),g=t(57064),y=t(57621),b=t(39504),C=t(24518),k=t(41286),w=t(27247),P=t(5574),S=t(66443),A=t(76278),F=(t(97242),t(31243)),I=t(33805),_=t(65661),D=t(97123),E=t(53540),B=t(78703),M=t.n(B),O=t(78316),T=t(38072),L=t(57689),U=t(90796),W=t(75985),N=t(6907),z=t(80184),H=function(e){var n=M().sanitize(e,{USE_PROFILES:{html:!0}});return(0,E.ZP)(n)};var G=["itadmin","admin"];n.default=function(){var e=(0,O.E)().user,n=(0,L.s0)(),t=["January","February","March","April","May","June","July","August","September","October","November","December"],E=new Date,B=E.getHours(),M=B<=12?0:B<=17?1:2,J="".concat(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][E.getDay()],", ").concat(t[E.getMonth()]," ").concat(E.getDate()),R=(0,l.useState)(""),V=(0,s.Z)(R,2),q=V[0],Y=V[1],K=["news","blog","policy"],Q={};K.forEach((function(e){return Q[e]=[]}));var X=(0,l.useState)(Q),$=(0,s.Z)(X,2),ee=$[0],ne=$[1],te=(0,l.useState)([]),re=(0,s.Z)(te,2),ie=re[0],ce=re[1],ae=function(n){K.forEach((function(n){F.Z.get("".concat(I.BC,"/services/").concat(n,"/").concat(e.company,"?adminId=").concat("","&limit=").concat(5)).then((function(e){ne((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,a.Z)({},n,e.data))}))}))})),F.Z.get("".concat(I.BC,"/services/").concat(n,"/").concat(e.company,"?adminId=").concat("","&limit=").concat(5)).then((function(e){ce(e.data)}))};(0,l.useEffect)((function(){if(e){Pe();K.forEach((function(n){F.Z.get("".concat(I.BC,"/services/").concat(n,"/").concat(e.company,"?adminId=").concat("","&limit=").concat(5)).then((function(e){ne((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,a.Z)({},n,e.data))}))}))}))}}),[e]);var se,oe=l.useState(!1),le=(0,s.Z)(oe,2),de=le[0],ue=le[1],he=l.useState(null),xe=(0,s.Z)(he,2),je=xe[0],pe=xe[1],Ze=function(e,n){ue(!0),e.content=n,pe(e)},me=function(){ue(!1),ce([])},fe=(0,l.useState)({service:null}),ve=(0,s.Z)(fe,2),ge=ve[0],ye=ve[1],be=(0,l.useState)([]),Ce=(0,s.Z)(be,2),ke=Ce[0],we=Ce[1],Pe=function(){var n=(0,c.Z)((0,r.Z)().mark((function n(){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!G.includes(e.role)){n.next=4;break}F.Z.get("".concat(I.BC,"/project/").concat(e.company)).then((function(e){we(e.data)})),n.next=13;break;case 4:if("manager"!==e.role){n.next=8;break}F.Z.get("".concat(I.BC,"/project/").concat(e.company,"?managerId=").concat(e.email)).then((function(e){we(e.data)})),n.next=13;break;case 8:if(t=e.firestore.projects){n.next=11;break}return n.abrupt("return");case 11:we([]),t.map((function(n){F.Z.get("".concat(I.BC,"/project/").concat(e.company,"?managerId=").concat(n)).then((function(e){we((function(n){return[].concat((0,i.Z)(n),(0,i.Z)(e.data))}))}))}));case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),Se=(0,l.useState)(null),Ae=(0,s.Z)(Se,2),Fe=Ae[0],Ie=Ae[1],_e=function(){localStorage.removeItem(Fe.service),Ie(null)},De=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,a.Z)({subject:Fe.subject},n,Fe["".concat(n,"Ans")]),e.prev=1,e.next=4,F.Z.patch("".concat(I.BC,"/services/").concat(n,"/").concat(Fe._id),{payload:t});case 4:1===e.sent.data&&(W.Am.success("".concat(n," updated")),ae(n),_e()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),W.Am.error("Error, try again !");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(N.ql,{children:(0,z.jsx)("title",{children:" Home | Firmamen"})}),(0,z.jsxs)(P.Z,{open:de,onClose:me,scroll:"paper",fullWidth:!0,maxWidth:"lg",children:["detailed info"===q?(0,z.jsx)(z.Fragment,{children:je&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(_.Z,{id:"scroll-dialog-title",children:(0,z.jsxs)(d.Z,{direction:"row",justifyContent:"space-between",children:[(0,z.jsx)("div",{children:je.subject}),(0,z.jsx)("div",{children:(0,z.jsxs)(u.Z,{variant:"overline",children:["Published: ",new Date(je.createdOn).toDateString()]})})]})}),(0,z.jsx)(h.Z,{dividers:!0,sx:{height:"600px"},children:(0,z.jsx)("div",{id:"scroll-dialog-description",children:H(je[je.content])})})]})}):(0,z.jsx)(z.Fragment,{children:q&&ie&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(_.Z,{id:"scroll-dialog-title",children:["All ",q.charAt(0).toUpperCase()+q.slice(1)]}),(0,z.jsx)(h.Z,{dividers:!0,sx:{height:"600px"},children:(0,z.jsx)(x.Z,{sx:{p:"0px"},children:0!==ie.length?ie.map((function(n,t){return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(A.Z,{alignItems:"flex-start",sx:{p:"0px"},onClick:function(){ye({service:q}),Y("detailed info"),Ze(n,q)},children:[(0,z.jsx)(j.Z,{primaryTypographyProps:{overflow:"clip",padding:"8px"},secondaryTypographyProps:{overflow:"clip"},primary:n.subject.slice(0,50)+(n.subject.length>50?"....":"")}),G.includes(e.role)&&(0,z.jsx)(p.Z,{children:(0,z.jsxs)(d.Z,{direction:"row",spacing:2,alignItems:"flex-end",children:[(0,z.jsx)(Z.Z,{onClick:function(e){e.stopPropagation();var t=(0,o.Z)({},n);t.service=q,t["".concat(q,"Ans")]=n[q],Ie(t),me()},color:"info",component:"label",children:(0,z.jsx)(k.Z,{})}),(0,z.jsx)(Z.Z,{onClick:(i=null===n||void 0===n?void 0:n._id,function(){var e=(0,c.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.stopPropagation(),t=q,e.next=4,F.Z.delete("".concat(I.BC,"/services/").concat(t,"/").concat(i));case 4:1===e.sent.data&&ae(t);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),color:"error",component:"label",children:(0,z.jsx)(w.Z,{})})]})})]},t),(0,z.jsx)(m.Z,{component:"li"})]});var i})):null})})]})}),(0,z.jsxs)(D.Z,{children:[ge.service&&(0,z.jsx)(C.Z,{onClick:function(){Y(ge.service),ye((function(e){return(0,o.Z)((0,o.Z)({},e),{},{service:null})}))},children:"Back"}),(0,z.jsx)(C.Z,{onClick:me,children:"Close"})]})]}),(0,z.jsxs)(P.Z,{maxWidth:"lg",fullWidth:!0,fullScreen:!0,open:Fe,onClose:_e,scroll:"paper",children:[(0,z.jsxs)(_.Z,{children:["Edit ",null===Fe||void 0===Fe?void 0:Fe.service]}),(0,z.jsxs)(h.Z,{children:[Fe&&(0,z.jsxs)(d.Z,{spacing:2,m:"auto",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)(u.Z,{variant:"p",children:"Subject"}),(0,z.jsx)(f.Z,{type:"text",variant:"outlined",fullWidth:!0,value:Fe.subject,onChange:function(e){Ie((function(n){return(0,o.Z)((0,o.Z)({},n),{},{subject:e.target.value})}))}})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)(u.Z,{variant:"p",children:Fe.service.charAt(0).toUpperCase()+Fe.service.slice(1)}),(0,z.jsx)(U.Z,{id:Fe.service,value:Fe,setValue:(se=Fe.service,function(e){Ie((function(n){return(0,o.Z)((0,o.Z)({},n),{},(0,a.Z)({},"".concat(se,"Ans"),e))}))})})]})]}),(0,z.jsx)("br",{}),(0,z.jsx)("br",{}),(0,z.jsx)(C.Z,{sx:{mr:2},onClick:_e,children:"Close"}),(0,z.jsxs)(C.Z,{variant:"contained",onClick:function(){De(null===Fe||void 0===Fe?void 0:Fe.service)},children:["Update ",null===Fe||void 0===Fe?void 0:Fe.service]})]})]}),e&&(0,z.jsxs)(u.Z,{variant:"h4",children:["Good ",["Morning","Afternoon","Evening"][M],",",(0,z.jsx)("br",{})," ",e.displayName]}),(0,z.jsxs)(v.ZP,{container:!0,colspacing:2,children:[(0,z.jsx)(v.ZP,{item:!0,xs:2.5,children:(0,z.jsx)(u.Z,{children:J})}),(0,z.jsxs)(v.ZP,{item:!0,xs:!0,p:2,children:[(0,z.jsx)(v.ZP,{container:!0,spacing:2,children:K.map((function(n){return(0,z.jsx)(v.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,z.jsx)(y.Z,{variant:"outlined",sx:{height:"300px"},children:(0,z.jsxs)(b.Z,{children:[(0,z.jsx)(u.Z,{fullWidth:!0,sx:{cursor:"pointer"},onMouseOver:function(e){e.target.style.textDecoration="underline"},onMouseLeave:function(e){e.target.style.textDecoration=""},color:"primary",onClick:function(t){Y(n),function(n){ue(!0);var t="admin"===e.firestore.role?e.uid:"";F.Z.get("".concat(I.BC,"/services/").concat(n,"/").concat(e.company,"?adminId=").concat(t,"&limit=").concat("")).then((function(e){ce(e.data)}))}(n)},children:n.charAt(0).toUpperCase()+n.slice(1)}),(0,z.jsx)("hr",{}),(0,z.jsx)(x.Z,{sx:{p:"0px"},children:0!==ee[n].length?ee[n].map((function(e){return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(A.Z,{alignItems:"flex-start",sx:{p:"0px"},onClick:function(){Y("detailed info"),Ze(e,n)},children:(0,z.jsx)(j.Z,{primaryTypographyProps:{overflow:"clip",padding:"8px"},secondaryTypographyProps:{overflow:"clip"},primary:e.subject.slice(0,30)+(e.subject.length>30?"....":"")})}),(0,z.jsx)(m.Z,{component:"li"})]})})):null})]})})})}))}),(0,z.jsx)("br",{}),(0,z.jsx)("br",{}),(0,z.jsx)(u.Z,{variant:"h4",children:"Project Feeds"}),(0,z.jsxs)(x.Z,{children:[(0,z.jsx)(A.Z,{divider:!0,children:(0,z.jsxs)(v.ZP,{container:!0,children:[(0,z.jsx)(v.ZP,{item:!0,xs:4.5,children:(0,z.jsx)(d.Z,{direction:"row",children:(0,z.jsx)(j.Z,{primary:"Project Name"})})}),(0,z.jsx)(v.ZP,{item:!0,xs:4.5,children:(0,z.jsx)(d.Z,{direction:"row",children:(0,z.jsx)(j.Z,{primary:"Assignee"})})}),(0,z.jsx)(v.ZP,{item:!0,xs:3,children:(0,z.jsx)(d.Z,{direction:"row",children:(0,z.jsx)(j.Z,{primary:"Last Activity"})})})]})}),ke&&ke.map((function(e,r){if(!(r>=8)){var i=new Date(e.createdOn),c=i.getDate()+" "+t[i.getMonth()]+", "+i.getFullYear();return(0,z.jsx)(A.Z,{divider:!0,onClick:function(){n("".concat(T.vB.general.projectview,"?id=").concat(e._id,"&title=").concat(e.name))},children:(0,z.jsxs)(v.ZP,{container:!0,children:[(0,z.jsx)(v.ZP,{item:!0,xs:4.5,children:(0,z.jsxs)(d.Z,{direction:"row",children:[(0,z.jsx)(g.Z,{children:(0,z.jsx)(S.Z,{})}),"\xa0",(0,z.jsx)(j.Z,{primary:e.name,secondary:e.desc})]})}),(0,z.jsx)(v.ZP,{item:!0,xs:4.5,children:(0,z.jsxs)(d.Z,{direction:"row",children:[(0,z.jsx)(g.Z,{children:(0,z.jsx)(S.Z,{})}),"\xa0",(0,z.jsx)(j.Z,{primary:e.managerId})]})}),(0,z.jsx)(v.ZP,{item:!0,xs:3,children:(0,z.jsxs)(d.Z,{direction:"row",children:[(0,z.jsx)(g.Z,{children:(0,z.jsx)(S.Z,{})}),"\xa0",(0,z.jsx)(j.Z,{primary:c})]})})]})})}}))]})]})]})]})}},90796:function(e,n,t){"use strict";t(72791);var r=t(28187),i=t.n(r),c=(t(80729),t(60908)),a=t(30777),s=t(95395),o=t(19719),l=t(8432),d=t(48773),u=t(9092),h=t(77425),x=t(28467),j=t(80177),p=t(76920),Z=t(32286),m=t(29889),f=t(12267),v=t(71918),g=t(80184);n.Z=function(e){var n=e.id,t=e.value,r=e.setValue;return(0,g.jsx)(i(),{id:n,autoFocus:!0,lang:"en",setOptions:{showPathLabel:!1,minHeight:"50vh",maxHeight:"50vh",placeholder:"Enter your text here ...",plugins:[c.Z,a.Z,s.Z,o.Z,l.Z,d.Z,u.Z,h.Z,x.Z,j.Z,p.Z,Z.Z,m.Z,f.Z,v.Z],buttonList:[["undo","redo"],["font","fontSize","formatBlock"],["paragraphStyle"],["bold","underline","italic","strike","subscript","superscript"],["fontColor","hiliteColor"],["removeFormat"],"/",["outdent","indent"],["align","horizontalRule","list","lineHeight"],["table","link","image"],["fullScreen"]],formats:["p","div","h1","h2","h3","h4","h5","h6"],font:["Arial","Calibri","Comic Sans","Courier","Garamond","Georgia","Impact","Lucida Console","Palatino Linotype","Segoe UI","Tahoma","Times New Roman","Trebuchet MS"]},setDefaultStyle:"font-family: Arial; font-size: 16px;",setContents:localStorage.getItem(n)||t["".concat(n,"Ans")],value:t["".concat(n,"Ans")],onChange:function(e){r(e),localStorage.setItem(n,e)}})}},97699:function(e,n,t){var r={"./ckb.js":82871,"./da.js":59651,"./de.js":64639,"./en.js":75213,"./es.js":47068,"./fr.js":78488,"./he.js":93179,"./index.js":87488,"./it.js":63577,"./ja.js":10916,"./ko.js":19920,"./lv.js":39985,"./nl.js":14076,"./pl.js":71676,"./pt_br.js":3204,"./ro.js":59575,"./ru.js":70123,"./se.js":52372,"./ua.js":63854,"./zh_cn.js":79602};function i(e){var n=c(e);return t(n)}function c(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=c,e.exports=i,i.id=97699}}]);
//# sourceMappingURL=7359.417cd42e.chunk.js.map