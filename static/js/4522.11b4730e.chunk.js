"use strict";(self.webpackChunk_minimal_minimal_kit_react=self.webpackChunk_minimal_minimal_kit_react||[]).push([[4522],{94522:function(e,t,n){n.r(t);var i=n(4942),s=n(1413),a=n(29439),r=n(72791),o=n(20890),l=n(61889),c=n(60220),d=n(36314),u=n(48550),h=n(24518),f=(n(97242),n(26467)),p=(n(763),n(75985)),m=n(78316),x=n(80184);t.default=function(){var e=(0,m.E)().user,t=f.ZP.auth().currentUser,n=(0,r.useRef)(),j=(0,r.useState)(100),g=(0,a.Z)(j,2),v=g[0],Z=g[1],N=(0,r.useState)(null),y=(0,a.Z)(N,2),b=y[0],w=y[1],P=(0,r.useState)({firstName:"",lastName:"",phoneNumber:"",state:"",country:""}),k=(0,a.Z)(P,2),C=k[0],_=k[1],U=function(e){return function(t){var n;n="phoneNumber"===e?t:t.target.value,_((function(t){return(0,s.Z)((0,s.Z)({},t),{},(0,i.Z)({},e,n))}))}};return(0,r.useEffect)((function(){e&&_((function(t){return(0,s.Z)((0,s.Z)({},t),{},{country:e.firestore.country||"None",state:e.firestore.state||"None"})}))}),[e]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(o.Z,{variant:"h2",children:"Profile"}),e&&(0,x.jsxs)(l.ZP,{container:!0,sx:{marginTop:6},children:[(0,x.jsx)(l.ZP,{item:!0,xs:4,sx:{padding:2},children:(0,x.jsxs)("center",{children:[(0,x.jsx)(c.Z,{alt:"profile user",src:b||e.photoURL,sx:{width:100,height:100}}),100===v?(0,x.jsxs)(o.Z,{variant:"p",sx:{color:"blue",cursor:"pointer"},onClick:function(e){n.current.click()},children:[(0,x.jsx)("input",{style:{display:"none"},type:"file",ref:n,onChange:function(n){!function(n){var i=n[0],s=(new Date).getTime()+i.name,a=f.tO.ref().child("/ProfilePictures/".concat(s)).put(i);a.on("state_changed",(function(e){var t=Math.floor(e.bytesTransferred/e.totalBytes*100);Z(t)}),(function(e){console.log(e)}),(function(){a.snapshot.ref.getDownloadURL().then((function(n){t.updateProfile({photoURL:n}).then((function(){w(n),f.RZ.collection(f.hJ).doc(e.uid).update({photoURL:n})})).catch((function(e){return console.log(e)}))}))}))}(n.target.files)},value:e.profilePic}),"Update Picture"]}):(0,x.jsxs)(x.Fragment,{children:["Uploading: ",v,"%"]}),(0,x.jsx)("br",{}),(0,x.jsx)("br",{}),(0,x.jsx)(o.Z,{variant:"h5",children:e.displayName})]})}),(0,x.jsxs)(l.ZP,{item:!0,xs:6,children:[(0,x.jsxs)(d.Z,{direction:"row",spacing:2,children:[(0,x.jsxs)("div",{style:{width:"50%"},children:[(0,x.jsxs)(o.Z,{variant:"p",children:["First Name ",(0,x.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,x.jsx)(u.Z,{type:"text",variant:"outlined",placeholder:e.displayName.split(" ")[0],fullWidth:!0,value:C.firstName,onChange:U("firstName")})]}),(0,x.jsxs)("div",{style:{width:"50%"},children:[(0,x.jsxs)(o.Z,{variant:"p",children:["Last Name ",(0,x.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,x.jsx)(u.Z,{type:"text",variant:"outlined",placeholder:e.displayName.split(" ")[1],fullWidth:!0,value:C.lastName,onChange:U("lastName")})]})]}),(0,x.jsx)("br",{}),(0,x.jsx)(d.Z,{direction:"row",spacing:2,children:(0,x.jsxs)("div",{style:{width:"100%"},children:[(0,x.jsx)(o.Z,{variant:"p",children:"Email Address"}),(0,x.jsx)(u.Z,{type:"text",variant:"outlined",value:e.email,fullWidth:!0,disabled:!0})]})}),(0,x.jsx)("br",{}),(0,x.jsxs)(d.Z,{direction:"row",justifyContent:"flex-end",spacing:2,children:[(0,x.jsx)(h.Z,{id:"password-button",variant:"contained",sx:{float:"right"},onClick:function(){(0,f.gQ)(e.email).then((function(){p.Am.success("Email sent")})).catch((function(e){e.code;var t=e.message;p.Am.error(t)}))},children:"Send password reset email"}),(0,x.jsx)(h.Z,{id:"submit-button",variant:"contained",sx:{float:"right"},onClick:function(){var n;n=C.firstName&&C.lastName?C.firstName+" "+C.lastName:e.displayName,delete C.firstName,delete C.lastName,C.displayName=n,Object.keys(C).forEach((function(t){""===C[t]&&(C[t]=e[t])})),t.updateProfile({displayName:n}).then((function(){console.log(C),f.RZ.collection(f.hJ).doc(e.uid).update(C).then((function(){p.Am.success("Profile Updated",{position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0}),_({firstName:"",lastName:"",phoneNumber:"",state:"",country:""}),window.location.href="/dashboard/profilesettings"}))})).catch((function(e){console.log(e)}))},children:"Save Details"})]})]})]})]})}}}]);
//# sourceMappingURL=4522.11b4730e.chunk.js.map