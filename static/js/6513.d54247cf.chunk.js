"use strict";(self.webpackChunk_minimal_minimal_kit_react=self.webpackChunk_minimal_minimal_kit_react||[]).push([[6513],{6513:function(e,t,n){n.d(t,{ot:function(){return z},$j:function(){return F},mh:function(){return V},Jx:function(){return w},Pv:function(){return U},GI:function(){return D},jf:function(){return G},Hw:function(){return K},ZP:function(){return I}});var r=n(1413),o=n(29439),a=n(47313),i=a.createContext(null);var s=n(15671),u=n(43144);function l(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function c(e,t){var n=t.viewState||t,r=!1;if("longitude"in n&&"latitude"in n){var o=e.center;e.center=new o.constructor(n.longitude,n.latitude),r=r||o!==e.center}if("zoom"in n){var a=e.zoom;e.zoom=n.zoom,r=r||a!==e.zoom}if("bearing"in n){var i=e.bearing;e.bearing=n.bearing,r=r||i!==e.bearing}if("pitch"in n){var s=e.pitch;e.pitch=n.pitch,r=r||s!==e.pitch}return n.padding&&!e.isPaddingEqual(n.padding)&&(r=!0,e.padding=n.padding),r}var f=n(37762),d=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function p(e){if(!e)return null;if("string"===typeof e)return e;if("toJS"in e&&(e=e.toJS()),!e.layers)return e;var t,n={},o=(0,f.Z)(e.layers);try{for(o.s();!(t=o.n()).done;){var a=t.value;n[a.id]=a}}catch(s){o.e(s)}finally{o.f()}var i=e.layers.map((function(e){var t=n[e.ref],o=null;if("interactive"in e&&delete(o=(0,r.Z)({},e)).interactive,t){delete(o=o||(0,r.Z)({},e)).ref;var a,i=(0,f.Z)(d);try{for(i.s();!(a=i.n()).done;){var u=a.value;u in t&&(o[u]=t[u])}}catch(s){i.e(s)}finally{i.f()}}return o||e}));return(0,r.Z)((0,r.Z)({},e),{},{layers:i})}function m(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!m(e[n],t[n]))return!1;return!0}if(Array.isArray(t))return!1;if("object"===typeof e&&"object"===typeof t){var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(var a=0,i=r;a<i.length;a++){var s=i[a];if(!t.hasOwnProperty(s))return!1;if(!m(e[s],t[s]))return!1}return!0}return!1}var v={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},_={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},h={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},y=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],g=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"],E=function(){function e(t,n,r){var o=this;(0,s.Z)(this,e),this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=function(e){var t=o.props[h[e.type]];t&&t(e)},this._onPointerEvent=function(e){"mousemove"!==e.type&&"mouseout"!==e.type||o._updateHover(e);var t=o.props[v[e.type]];if(t){if(o.props.interactiveLayerIds&&"mouseover"!==e.type&&"mouseout"!==e.type){var n=o._hoveredFeatures||o._map.queryRenderedFeatures(e.point,{layers:o.props.interactiveLayerIds});e.features=n}t(e),delete e.features}},this._onCameraEvent=function(e){if(!o._internalUpdate){var t=o.props[_[e.type]];t&&t(e)}e.type in o._deferredEvents&&(o._deferredEvents[e.type]=!1)},this._MapClass=t,this.props=n,this._initialize(r)}return(0,u.Z)(e,[{key:"map",get:function(){return this._map}},{key:"transform",get:function(){return this._renderTransform}},{key:"setProps",value:function(e){var t=this.props;this.props=e;var n=this._updateSettings(e,t);n&&this._createShadowTransform(this._map);var r=this._updateSize(e),o=this._updateViewState(e,!0);this._updateStyle(e,t),this._updateStyleComponents(e,t),this._updateHandlers(e,t),(n||r||o&&!this._map.isMoving())&&this.redraw()}},{key:"_initialize",value:function(e){var t=this,n=this.props,o=(0,r.Z)((0,r.Z)((0,r.Z)({},n),n.initialViewState),{},{accessToken:n.mapboxAccessToken||A()||null,container:e,style:p(n.mapStyle)}),a=o.initialViewState||o.viewState||o;if(Object.assign(o,{center:[a.longitude||0,a.latitude||0],zoom:a.zoom||0,pitch:a.pitch||0,bearing:a.bearing||0}),n.gl){var i=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(){return HTMLCanvasElement.prototype.getContext=i,n.gl}}var s=new this._MapClass(o);a.padding&&s.setPadding(a.padding),n.cursor&&(s.getCanvas().style.cursor=n.cursor),this._createShadowTransform(s);var u=s._render;s._render=function(e){t._inRender=!0,u.call(s,e),t._inRender=!1};var l=s._renderTaskQueue.run;s._renderTaskQueue.run=function(e){l.call(s._renderTaskQueue,e),t._onBeforeRepaint()},s.on("render",(function(){return t._onAfterRepaint()}));var c=s.fire;for(var f in s.fire=this._fireEvent.bind(this,c),s.on("resize",(function(){t._renderTransform.resize(s.transform.width,s.transform.height)})),s.on("styledata",(function(){return t._updateStyleComponents(t.props,{})})),s.on("sourcedata",(function(){return t._updateStyleComponents(t.props,{})})),v)s.on(f,this._onPointerEvent);for(var d in _)s.on(d,this._onCameraEvent);for(var m in h)s.on(m,this._onEvent);this._map=s}},{key:"recycle",value:function(){var t=this.map.getContainer().querySelector("[mapboxgl-children]");null===t||void 0===t||t.remove(),e.savedMaps.push(this)}},{key:"destroy",value:function(){this._map.remove()}},{key:"redraw",value:function(){var e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}},{key:"_createShadowTransform",value:function(e){var t=function(e){var t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}(e.transform);e.painter.transform=t,this._renderTransform=t}},{key:"_updateSize",value:function(e){var t=e.viewState;if(t){var n=this._map;if(t.width!==n.transform.width||t.height!==n.transform.height)return n.resize(),!0}return!1}},{key:"_updateViewState",value:function(e,t){if(this._internalUpdate)return!1;var n=this._map,o=this._renderTransform,a=o.zoom,i=o.pitch,s=o.bearing,u=n.isMoving();u&&(o.cameraElevationReference="sea");var f=c(o,(0,r.Z)((0,r.Z)({},l(n.transform)),e));if(u&&(o.cameraElevationReference="ground"),f&&t){var d=this._deferredEvents;d.move=!0,d.zoom||(d.zoom=a!==o.zoom),d.rotate||(d.rotate=s!==o.bearing),d.pitch||(d.pitch=i!==o.pitch)}return u||c(n.transform,e),f}},{key:"_updateSettings",value:function(e,t){for(var n=this._map,r=!1,o=0,a=y;o<a.length;o++){var i=a[o];i in e&&!m(e[i],t[i])&&(r=!0,n["set".concat(i[0].toUpperCase()).concat(i.slice(1))](e[i]))}return r}},{key:"_updateStyle",value:function(e,t){if(e.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=e.cursor),e.mapStyle!==t.mapStyle){var n={diff:e.styleDiffing};return"localIdeographFontFamily"in e&&(n.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(p(e.mapStyle),n),!0}return!1}},{key:"_updateStyleComponents",value:function(e,t){var n=this._map,r=!1;return n.style.loaded()&&("light"in e&&!m(e.light,t.light)&&(r=!0,n.setLight(e.light)),"fog"in e&&!m(e.fog,t.fog)&&(r=!0,n.setFog(e.fog)),"terrain"in e&&!m(e.terrain,t.terrain)&&(e.terrain&&!n.getSource(e.terrain.source)||(r=!0,n.setTerrain(e.terrain)))),r}},{key:"_updateHandlers",value:function(e,t){for(var n=this._map,r=!1,o=0,a=g;o<a.length;o++){var i=a[o],s=e[i];m(s,t[i])||(r=!0,s?n[i].enable(s):n[i].disable())}return r}},{key:"_updateHover",value:function(e){var t,n=this.props;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){var r,o=e.type,a=(null===(t=this._hoveredFeatures)||void 0===t?void 0:t.length)>0;if("mousemove"===o)try{r=this._map.queryRenderedFeatures(e.point,{layers:n.interactiveLayerIds})}catch(s){r=[]}else r=[];var i=r.length>0;!i&&a&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=r,i&&!a&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=o}else this._hoveredFeatures=null}},{key:"_fireEvent",value:function(e,t,n){var r=this._map,o=r.transform,a="string"===typeof t?t:t.type;return"move"===a&&this._updateViewState(this.props,!1),a in _&&("object"===typeof t&&(t.viewState=l(o)),this._map.isMoving())?(r.transform=this._renderTransform,e.call(r,t,n),r.transform=o,r):(e.call(r,t,n),r)}},{key:"_onBeforeRepaint",value:function(){var e=this,t=this._map;for(var n in this._internalUpdate=!0,this._deferredEvents)this._deferredEvents[n]&&t.fire(n);this._internalUpdate=!1;var r=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=function(){e._map.transform=r}}}],[{key:"reuse",value:function(t,n){var o=e.savedMaps.pop();if(!o)return null;var a=o.map,i=a.getContainer();for(n.className=i.className;i.childNodes.length>0;)n.appendChild(i.childNodes[0]);a._container=n,o.setProps((0,r.Z)((0,r.Z)({},t),{},{styleDiffing:!1})),a.resize();var s=t.initialViewState;return s&&(s.bounds?a.fitBounds(s.bounds,(0,r.Z)((0,r.Z)({},s.fitBoundsOptions),{},{duration:0})):o._updateViewState(s,!1)),a.isStyleLoaded()?a.fire("load"):a.once("styledata",(function(){return a.fire("load")})),o}}]),e}();function A(){var e=null;if("undefined"!==typeof location){var t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTH0_CLIENT_ID:"",REACT_APP_AUTH0_DOMAIN:"",REACT_APP_AWS_COGNITO_CLIENT_ID:"",REACT_APP_AWS_COGNITO_USER_POOL_ID:"",REACT_APP_FIREBASE_API_KEY:"AIzaSyBSEx2-ykPTb70keLZh3LAuDtQT2VyCsco",REACT_APP_FIREBASE_APPID:"1:599725599274:web:8f9a716ca577fc72a1f153",REACT_APP_FIREBASE_AUTH_DOMAIN:"evencloud-26d32.firebaseapp.com",REACT_APP_FIREBASE_DB_URL:"https://evencloud-26d32.firebaseio.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-VSJNQ5LYK5",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"599725599274",REACT_APP_FIREBASE_PROJECT_ID:"evencloud-26d32",REACT_APP_FIREBASE_STORAGE_BUCKET:"gs://evencloud-26d32.appspot.com",REACT_APP_HOST_API_KEY:"https://api-dev-minimal-v4.vercel.app",REACT_APP_MAPBOX_API:"",REACT_APP_OPENAI_API_KEY:"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"}.MapboxAccessToken}catch(n){}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTH0_CLIENT_ID:"",REACT_APP_AUTH0_DOMAIN:"",REACT_APP_AWS_COGNITO_CLIENT_ID:"",REACT_APP_AWS_COGNITO_USER_POOL_ID:"",REACT_APP_FIREBASE_API_KEY:"AIzaSyBSEx2-ykPTb70keLZh3LAuDtQT2VyCsco",REACT_APP_FIREBASE_APPID:"1:599725599274:web:8f9a716ca577fc72a1f153",REACT_APP_FIREBASE_AUTH_DOMAIN:"evencloud-26d32.firebaseapp.com",REACT_APP_FIREBASE_DB_URL:"https://evencloud-26d32.firebaseio.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-VSJNQ5LYK5",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"599725599274",REACT_APP_FIREBASE_PROJECT_ID:"evencloud-26d32",REACT_APP_FIREBASE_STORAGE_BUCKET:"gs://evencloud-26d32.appspot.com",REACT_APP_HOST_API_KEY:"https://api-dev-minimal-v4.vercel.app",REACT_APP_MAPBOX_API:"",REACT_APP_OPENAI_API_KEY:"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"}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(r){}return e}E.savedMaps=[];var P=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function S(e,t){if(!e)return null;var n,r=e.map,o={getMap:function(){return r},getCenter:function(){return e.transform.center},getZoom:function(){return e.transform.zoom},getBearing:function(){return e.transform.bearing},getPitch:function(){return e.transform.pitch},getPadding:function(){return e.transform.padding},getBounds:function(){return e.transform.getBounds()},project:function(n){return e.transform.locationPoint(t.LngLat.convert(n))},unproject:function(n){return e.transform.pointLocation(t.Point.convert(n))},queryTerrainElevation:function(t,n){var o=r.transform;r.transform=e.transform;var a=r.queryTerrainElevation(t,n);return r.transform=o,a}},a=(0,f.Z)(function(e){var t=new Set,n=e;for(;n;){var r,o=(0,f.Z)(Object.getOwnPropertyNames(n));try{for(o.s();!(r=o.n()).done;){var a=r.value;"_"!==a[0]&&"function"===typeof e[a]&&"fire"!==a&&"setEventedParent"!==a&&t.add(a)}}catch(i){o.e(i)}finally{o.f()}n=Object.getPrototypeOf(n)}return Array.from(t)}(r));try{for(a.s();!(n=a.n()).done;){var i=n.value;i in o||P.includes(i)||(o[i]=r[i].bind(r))}}catch(s){a.e(s)}finally{a.f()}return o}var T="undefined"!==typeof document?a.useLayoutEffect:a.useEffect,C=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];var R=a.createContext(null),L={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:function(e){return console.error(e.error)},RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},b=(0,a.forwardRef)((function(e,t){var s=(0,a.useContext)(i),u=(0,a.useState)(null),l=(0,o.Z)(u,2),c=l[0],d=l[1],p=(0,a.useRef)(),m=(0,a.useRef)({mapLib:null,map:null}).current;(0,a.useEffect)((function(){var t,r=e.mapLib,o=!0;return Promise.resolve(r||Promise.resolve().then(n.t.bind(n,25056,23))).then((function(n){if(o){if(n.Map||(n=n.default),!n||!n.Map)throw new Error("Invalid mapLib");if(!n.supported(e))throw new Error("Map is not supported by this browser");!function(e,t){var n,r=(0,f.Z)(C);try{for(r.s();!(n=r.n()).done;){var o=n.value;o in t&&(e[o]=t[o])}}catch(a){r.e(a)}finally{r.f()}t.RTLTextPlugin&&e.getRTLTextPluginStatus&&"unavailable"===e.getRTLTextPluginStatus()&&e.setRTLTextPlugin(t.RTLTextPlugin,(function(e){e&&console.error(e)}),!1)}(n,e),e.reuseMaps&&(t=E.reuse(e,p.current)),t||(t=new E(n.Map,e,p.current)),m.map=S(t,n),m.mapLib=n,d(t),null===s||void 0===s||s.onMapMount(m.map,e.id)}})).catch((function(t){e.onError({type:"error",target:null,originalEvent:null,error:t})})),function(){o=!1,t&&(null===s||void 0===s||s.onMapUnmount(e.id),e.reuseMaps?t.recycle():t.destroy())}}),[]),T((function(){c&&c.setProps(e)})),(0,a.useImperativeHandle)(t,(function(){return m.map}),[c]);var v=(0,a.useMemo)((function(){return(0,r.Z)({position:"relative",width:"100%",height:"100%"},e.style)}),[e.style]);return a.createElement("div",{id:e.id,ref:p,style:v},c&&a.createElement(R.Provider,{value:m},a.createElement("div",{"mapboxgl-children":""},e.children)))}));b.displayName="Map",b.defaultProps=L;var I=b,x=n(1168),M=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function O(e,t){if(e&&t){var n=e.style;for(var r in t){var o=t[r];Number.isFinite(o)&&!M.test(r)?n[r]="".concat(o,"px"):n[r]=o}}}function k(e){var t=(0,a.useContext)(R),n=t.map,o=t.mapLib,i=(0,a.useRef)({props:e});i.current.props=e;var s=(0,a.useMemo)((function(){var t=!1;a.Children.forEach(e.children,(function(e){e&&(t=!0)}));var n=(0,r.Z)((0,r.Z)({},e),{},{element:t?document.createElement("div"):null}),u=new o.Marker(n).setLngLat([e.longitude,e.latitude]);return u.getElement().addEventListener("click",(function(e){var t,n;null===(n=(t=i.current.props).onClick)||void 0===n||n.call(t,{type:"click",target:u,originalEvent:e})})),u.on("dragstart",(function(e){var t,n,r=e;r.lngLat=s.getLngLat(),null===(n=(t=i.current.props).onDragStart)||void 0===n||n.call(t,r)})),u.on("drag",(function(e){var t,n,r=e;r.lngLat=s.getLngLat(),null===(n=(t=i.current.props).onDrag)||void 0===n||n.call(t,r)})),u.on("dragend",(function(e){var t,n,r=e;r.lngLat=s.getLngLat(),null===(n=(t=i.current.props).onDragEnd)||void 0===n||n.call(t,r)})),u}),[]);return(0,a.useEffect)((function(){return s.addTo(n.getMap()),function(){s.remove()}}),[]),(0,a.useEffect)((function(){O(s.getElement(),e.style)}),[e.style]),s.getLngLat().lng===e.longitude&&s.getLngLat().lat===e.latitude||s.setLngLat([e.longitude,e.latitude]),e.offset&&!function(e,t){var n=Array.isArray(e)?e[0]:e?e.x:0,r=Array.isArray(e)?e[1]:e?e.y:0,o=Array.isArray(t)?t[0]:t?t.x:0,a=Array.isArray(t)?t[1]:t?t.y:0;return n===o&&r===a}(s.getOffset(),e.offset)&&s.setOffset(e.offset),s.isDraggable()!==e.draggable&&s.setDraggable(e.draggable),s.getRotation()!==e.rotation&&s.setRotation(e.rotation),s.getRotationAlignment()!==e.rotationAlignment&&s.setRotationAlignment(e.rotationAlignment),s.getPitchAlignment()!==e.pitchAlignment&&s.setPitchAlignment(e.pitchAlignment),s.getPopup()!==e.popup&&s.setPopup(e.popup),(0,x.createPortal)(e.children,s.getElement())}k.defaultProps={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};var w=a.memo(k);function Z(e){return new Set(e?e.trim().split(/\s+/):[])}var D=a.memo((function(e){var t=(0,a.useContext)(R),n=t.map,o=t.mapLib,i=(0,a.useMemo)((function(){return document.createElement("div")}),[]),s=(0,a.useRef)({props:e});s.current.props=e;var u=(0,a.useMemo)((function(){var t=(0,r.Z)({},e),n=new o.Popup(t).setLngLat([e.longitude,e.latitude]);return n.once("open",(function(e){var t,n;null===(n=(t=s.current.props).onOpen)||void 0===n||n.call(t,e)})),n}),[]);if((0,a.useEffect)((function(){var e=function(e){var t,n;null===(n=(t=s.current.props).onClose)||void 0===n||n.call(t,e)};return u.on("close",e),u.setDOMContent(i).addTo(n.getMap()),function(){u.off("close",e),u.isOpen()&&u.remove()}}),[]),(0,a.useEffect)((function(){O(u.getElement(),e.style)}),[e.style]),u.isOpen()&&(u.getLngLat().lng===e.longitude&&u.getLngLat().lat===e.latitude||u.setLngLat([e.longitude,e.latitude]),e.offset&&!m(u.options.offset,e.offset)&&u.setOffset(e.offset),u.options.anchor===e.anchor&&u.options.maxWidth===e.maxWidth||(u.options.anchor=e.anchor,u.setMaxWidth(e.maxWidth)),u.options.className!==e.className)){var l,c=Z(u.options.className),d=Z(e.className),p=(0,f.Z)(c);try{for(p.s();!(l=p.n()).done;){var v=l.value;d.has(v)||u.removeClassName(v)}}catch(g){p.e(g)}finally{p.f()}var _,h=(0,f.Z)(d);try{for(h.s();!(_=h.n()).done;){var y=_.value;c.has(y)||u.addClassName(y)}}catch(g){h.e(g)}finally{h.f()}u.options.className=e.className}return(0,x.createPortal)(e.children,i)}));var N=function(e,t,n,r){var o=(0,a.useContext)(R),i=(0,a.useMemo)((function(){return e(o)}),[]);return(0,a.useEffect)((function(){var e=r||n||t,a="function"===typeof t&&"function"===typeof n?t:null,s="function"===typeof n?n:"function"===typeof t?t:null,u=o.map;return u.hasControl(i)||(u.addControl(i,null===e||void 0===e?void 0:e.position),a&&a(o)),function(){s&&s(o),u.hasControl(i)&&u.removeControl(i)}}),[]),i};a.memo((function(e){var t=N((function(t){return new t.mapLib.AttributionControl(e)}),{position:e.position});return(0,a.useEffect)((function(){O(t._container,e.style)}),[e.style]),null}));var z=a.memo((function(e){var t=N((function(t){return new t.mapLib.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)})}),{position:e.position});return(0,a.useEffect)((function(){O(t._controlContainer,e.style)}),[e.style]),null})),B=(0,a.forwardRef)((function(e,t){var n=(0,a.useRef)({props:e}),r=N((function(t){var r=new t.mapLib.GeolocateControl(e),o=r._setupUI;return r._setupUI=function(e){r._container.hasChildNodes()||o(e)},r.on("geolocate",(function(e){var t,r;null===(r=(t=n.current.props).onGeolocate)||void 0===r||r.call(t,e)})),r.on("error",(function(e){var t,r;null===(r=(t=n.current.props).onError)||void 0===r||r.call(t,e)})),r.on("outofmaxbounds",(function(e){var t,r;null===(r=(t=n.current.props).onOutOfMaxBounds)||void 0===r||r.call(t,e)})),r.on("trackuserlocationstart",(function(e){var t,r;null===(r=(t=n.current.props).onTrackUserLocationStart)||void 0===r||r.call(t,e)})),r.on("trackuserlocationend",(function(e){var t,r;null===(r=(t=n.current.props).onTrackUserLocationEnd)||void 0===r||r.call(t,e)})),r}),{position:e.position});return n.current.props=e,(0,a.useImperativeHandle)(t,(function(){return{trigger:function(){return r.trigger()}}}),[]),(0,a.useEffect)((function(){O(r._container,e.style)}),[e.style]),null}));B.displayName="GeolocateControl";var F=a.memo(B);var U=a.memo((function(e){var t=N((function(t){return new t.mapLib.NavigationControl(e)}),{position:e.position});return(0,a.useEffect)((function(){O(t._container,e.style)}),[e.style]),null}));function H(e){var t=N((function(t){return new t.mapLib.ScaleControl(e)}),{position:e.position});return t.options.unit===e.unit&&t.options.maxWidth===e.maxWidth||(t.options.maxWidth=e.maxWidth,t.setUnit(e.unit)),(0,a.useEffect)((function(){O(t._container,e.style)}),[e.style]),null}H.defaultProps={unit:"metric",maxWidth:100};var G=a.memo(H);function W(e,t){if(!e)throw new Error(t)}var j=0;var K=function(e){var t=(0,a.useContext)(R).map.getMap(),n=(0,a.useRef)(e),i=(0,a.useState)(0),s=(0,o.Z)(i,2)[1],u=(0,a.useMemo)((function(){return e.id||"jsx-source-".concat(j++)}),[]);(0,a.useEffect)((function(){if(t){var e=function(){return setTimeout((function(){return s((function(e){return e+1}))}),0)};return t.on("styledata",e),e(),function(){var n;if(t.off("styledata",e),t.style&&t.style._loaded&&t.getSource(u)){var r=null===(n=t.getStyle())||void 0===n?void 0:n.layers;if(r){var o,a=(0,f.Z)(r);try{for(a.s();!(o=a.n()).done;){var i=o.value;i.source===u&&t.removeLayer(i.id)}}catch(s){a.e(s)}finally{a.f()}}t.removeSource(u)}}}}),[t]);var l=t&&t.style&&t.getSource(u);return l?function(e,t,n){W(t.id===n.id,"source id changed"),W(t.type===n.type,"source type changed");var r="",o=0;for(var a in t)"children"===a||"id"===a||m(n[a],t[a])||(r=a,o++);if(o){var i=t.type;if("geojson"===i)e.setData(t.data);else if("image"===i)e.updateImage({url:t.url,coordinates:t.coordinates});else if("canvas"!==i&&"video"!==i||1!==o||"coordinates"!==r)if("vector"===i&&"setUrl"in e)switch(r){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles)}else console.warn("Unable to update <Source> prop: ".concat(r));else e.setCoordinates(t.coordinates)}}(l,e,n.current):l=function(e,t,n){if(e.style&&e.style._loaded){var o=(0,r.Z)({},n);return delete o.id,delete o.children,e.addSource(t,o),e.getSource(t)}return null}(t,u,e),n.current=e,l&&a.Children.map(e.children,(function(e){return e&&(0,a.cloneElement)(e,{source:u})}))||null};var J=0;var V=function(e){var t=(0,a.useContext)(R).map.getMap(),n=(0,a.useRef)(e),i=(0,a.useState)(0),s=(0,o.Z)(i,2)[1],u=(0,a.useMemo)((function(){return e.id||"jsx-layer-".concat(J++)}),[]);if((0,a.useEffect)((function(){if(t){var e=function(){return s((function(e){return e+1}))};return t.on("styledata",e),e(),function(){t.off("styledata",e),t.style&&t.style._loaded&&t.getLayer(u)&&t.removeLayer(u)}}}),[t]),t&&t.style&&t.getLayer(u))try{!function(e,t,n,r){if(W(n.id===r.id,"layer id changed"),W(n.type===r.type,"layer type changed"),"custom"!==n.type&&"custom"!==r.type){var o=n.layout,a=void 0===o?{}:o,i=n.paint,s=void 0===i?{}:i,u=n.filter,l=n.minzoom,c=n.maxzoom,f=n.beforeId;if(f!==r.beforeId&&e.moveLayer(t,f),a!==r.layout){var d=r.layout||{};for(var p in a)m(a[p],d[p])||e.setLayoutProperty(t,p,a[p]);for(var v in d)a.hasOwnProperty(v)||e.setLayoutProperty(t,v,void 0)}if(s!==r.paint){var _=r.paint||{};for(var h in s)m(s[h],_[h])||e.setPaintProperty(t,h,s[h]);for(var y in _)s.hasOwnProperty(y)||e.setPaintProperty(t,y,void 0)}m(u,r.filter)||e.setFilter(t,u),l===r.minzoom&&c===r.maxzoom||e.setLayerZoomRange(t,l,c)}}(t,u,e,n.current)}catch(l){console.warn(l)}else!function(e,t,n){if(e.style&&e.style._loaded&&(!("source"in n)||e.getSource(n.source))){var o=(0,r.Z)((0,r.Z)({},n),{},{id:t});delete o.beforeId,e.addLayer(o,n.beforeId)}}(t,u,e);return n.current=e,null}}}]);